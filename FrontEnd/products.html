<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vestu - Modern Clothing Store</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
    --primary: #2a5885;
    --secondary: #f8f9fa;
    --accent: #e63946;
    --text: #333;
    --light-gray: #e9ecef;
    --medium-gray: #6c757d;
    --dark-gray: #343a40;
    --white: #fff;
    --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    --success: #4CAF50;
    --warning: #FFC107;
    --danger: #F44336;
    --info: #2196F3;
  }
  
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  }
  
  body {
    color: var(--text);
    background-color: var(--secondary);
  }
  
  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
  }
  
  /* Header */
  header {
    background-color: var(--white);
    box-shadow: var(--shadow);
    position: sticky;
    top: 0;
    z-index: 100;
  }
  
  .header-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px 0;
  }
  
  .logo {
    font-size: 24px;
    font-weight: bold;
    color: var(--primary);
  }
  
  .logo span {
    color: var(--text);
  }
  
  .search-bar {
    flex-grow: 1;
    margin: 0 40px;
    position: relative;
  }
  
  .search-bar input {
    width: 100%;
    padding: 10px 15px;
    border-radius: 25px;
    border: 1px solid var(--light-gray);
    font-size: 16px;
  }
  
  .search-bar button {
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    background: none;
    border: none;
    cursor: pointer;
  }
  
  .nav-icons {
    display: flex;
    gap: 20px;
  }
  
  .nav-icon {
    position: relative;
    cursor: pointer;
    text-decoration: none;
    color: var(--text);
  }
  
  .nav-icon span {
    position: absolute;
    top: -8px;
    right: -8px;
    background-color: var(--accent);
    color: var(--white);
    border-radius: 50%;
    width: 18px;
    height: 18px;
    font-size: 12px;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  
  /* Navigation */
  nav {
    background-color: var(--primary);
    padding: 10px 0;
  }
  
  .nav-links {
    display: flex;
    list-style: none;
    justify-content: center;
    gap: 30px;
  }
  
  .nav-links a {
    color: var(--white);
    text-decoration: none;
    font-weight: 500;
    padding: 5px 10px;
    transition: background-color 0.3s;
  }
  
  .nav-links a:hover {
    background-color: rgba(255, 255, 255, 0.1);
    border-radius: 4px;
  }
  
  /* Hero Section */
  .hero {
    height: 500px;
    background-image: url('https://source.unsplash.com/random/1200x500/?fashion');
    background-size: cover;
    background-position: center;
    display: flex;
    align-items: center;
    position: relative;
  }
  
  .hero::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.4);
  }
  
  .hero-content {
    position: relative;
    z-index: 1;
    color: var(--white);
    max-width: 600px;
    padding: 30px;
  }
  
  .hero h1 {
    font-size: 48px;
    margin-bottom: 20px;
  }
  
  .hero p {
    font-size: 18px;
    margin-bottom: 30px;
  }
  
  .btn {
    display: inline-block;
    background-color: var(--accent);
    color: var(--white);
    padding: 12px 25px;
    border-radius: 4px;
    text-decoration: none;
    font-weight: bold;
    text-transform: uppercase;
    transition: background-color 0.3s;
    border: none;
    cursor: pointer;
  }
  
  .btn:hover {
    background-color: #d62839;
  }
  
  /* Featured Categories */
  .featured-categories {
    padding: 60px 0;
  }
  
  .section-title {
    text-align: center;
    margin-bottom: 40px;
    font-size: 32px;
    color: var(--primary);
  }
  
  .categories {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
  }
  
  .category-card {
    height: 200px;
    position: relative;
    overflow: hidden;
    border-radius: 8px;
    box-shadow: var(--shadow);
    display: block;
    text-decoration: none;
  }
  
  .category-card img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.5s;
  }
  
  .category-card:hover img {
    transform: scale(1.05);
  }
  
  .category-card .overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: linear-gradient(to top, rgba(0,0,0,0.7), transparent);
    padding: 20px;
    color: var(--white);
  }
  
  /* Featured Products */
  .featured-products {
    padding: 60px 0;
    background-color: var(--white);
  }
  
  .products {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 30px;
  }
  
  .product-card {
    background-color: var(--white);
    border-radius: 8px;
    overflow: hidden;
    box-shadow: var(--shadow);
    transition: transform 0.3s;
  }
  
  .product-card:hover {
    transform: translateY(-5px);
  }
  
  .product-img {
    height: 250px;
    overflow: hidden;
    display: block;
  }
  
  .product-img img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  
  .product-info {
    padding: 20px;
  }
  
  .product-title {
    font-weight: bold;
    margin-bottom: 5px;
  }
  
  .product-price {
    color: var(--accent);
    font-weight: bold;
    margin-bottom: 10px;
  }
  
  .product-rating {
    color: #ffc107;
    margin-bottom: 15px;
  }
  
  .product-actions {
    display: flex;
    justify-content: space-between;
  }
  
  .add-to-cart {
    background-color: var(--primary);
    color: var(--white);
    border: none;
    padding: 8px 15px;
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.3s;
  }
  
  .add-to-cart:hover {
    background-color: #1e4a73;
  }
    
  /* Footer */
  footer {
    background-color: #1a1a1a;
    color: var(--white);
    padding: 60px 0 20px;
  }
  
  .footer-columns {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 30px;
    margin-bottom: 40px;
  }
  
  .footer-column h3 {
    font-size: 18px;
    margin-bottom: 20px;
    position: relative;
    padding-bottom: 10px;
  }
  
  .footer-column h3::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 40px;
    height: 2px;
    background-color: var(--accent);
  }
  
  .footer-links {
    list-style: none;
  }
  
  .footer-links li {
    margin-bottom: 10px;
  }
  
  .footer-links a {
    color: #bbb;
    text-decoration: none;
    transition: color 0.3s;
  }
  
  .footer-links a:hover {
    color: var(--white);
  }
  
  .copyright {
    text-align: center;
    padding-top: 20px;
    border-top: 1px solid #333;
    color: #bbb;
    font-size: 14px;
  }
  
  /* Products Page */
  .products-page {
    padding: 60px 0;
  }
  
  .products-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px;
    flex-wrap: wrap;
  }
  
  .products-filters {
    display: flex;
    gap: 20px;
    flex-wrap: wrap;
  }
  
  .filter-group {
    display: flex;
    align-items: center;
    gap: 10px;
  }
  
  .filter-group select {
    padding: 8px 15px;
    border: 1px solid var(--light-gray);
    border-radius: 4px;
    background-color: var(--white);
  }
  
  .products-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 30px;
  }
  
  .pagination {
    display: flex;
    justify-content: center;
    margin-top: 40px;
    gap: 10px;
  }
  
  .pagination a {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    border-radius: 4px;
    text-decoration: none;
    color: var(--text);
    background-color: var(--white);
    transition: all 0.3s;
  }
  
  .pagination a.active {
    background-color: var(--primary);
    color: var(--white);
  }
  
  .pagination a:hover {
    background-color: var(--light-gray);
  }
  
  .pagination a.next {
    width: auto;
    padding: 0 15px;
  }
  /* Products Page */
.products-page {
  padding: 60px 0;
}
.products-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 30px;
  flex-wrap: wrap;
}
.products-filters {
  display: flex;
  gap: 20px;
  flex-wrap: wrap;
}
.filter-group {
  display: flex;
  align-items: center;
  gap: 10px;
}
.filter-group select {
  padding: 8px 15px;
  border: 1px solid var(--light-gray);
  border-radius: 4px;
  background-color: var(--white);
}
.products-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 30px;
}
.pagination {
  display: flex;
  justify-content: center;
  margin-top: 40px;
  gap: 10px;
}
.pagination a {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  border-radius: 4px;
  text-decoration: none;
  color: var(--text);
  background-color: var(--white);
  transition: all 0.3s;
}
.pagination a.active {
  background-color: var(--primary);
  color: var(--white);
}
.pagination a:hover {
  background-color: var(--light-gray);
}
.pagination a.next {
  width: auto;
  padding: 0 15px;
}

  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="container header-container">
      <div class="logo">V<span>estu</span></div>
      
      <div class="search-bar">
        <input type="text" id="search-input" placeholder="Search for products...">
        <button id="search-button"><i class="fas fa-search"></i></button>
      </div>
      
      <div class="nav-icons">
        <a href="login.html" class="nav-icon">
          <i class="fas fa-user"></i>
        <a href="cart.html" class="nav-icon">
          <i class="fas fa-shopping-cart"></i>
          <span>3</span>
        </a>
      </div>
    </div>
    
    <nav>
      <div class="container">
        <ul class="nav-links">
          <li><a href="index.html">Home</a></li>
          <li><a href="products.html?category=denim">Denim Collection</a></li>
          <li><a href="products.html?category=oversized">Oversized Essentials</a></li>
          <li><a href="products.html?category=polo">Classic Polo</a></li>
          <li><a href="products.html?category=basics">Everyday Basics</a></li>
        </ul>
      </div>
    </nav>
  </header>
  
  <!-- Products Page -->
  <section class="products-page">
    <div class="container">
      <div class="products-header">
        <h1 class="section-title">All Products</h1>
        <div class="products-filters">
          <div class="filter-group">
            <label for="category-filter">Category:</label>
            <select id="category-filter">
              <option value="all">All Categories</option>
              <option value="denim">Denim Collection</option>
              <option value="oversized">Oversized Essentials</option>
              <option value="polo">Classic Polo</option>
              <option value="basics">Everyday Basics</option>
            </select>
          </div>
          <div class="filter-group">
            <label for="sort-filter">Sort By:</label>
            <select id="sort-filter">
              <option value="featured">Featured</option>
              <option value="price-low">Price: Low to High</option>
              <option value="price-high">Price: High to Low</option>
              <!-- <option value="newest">Newest</option> -->
            </select>
          </div>
        </div>
      </div>
      
      <div class="products-grid">
        <!-- Product 1 -->
        <div class="product-card">
          <a href="product.html?id=1" class="product-img">
            <img src="https://source.unsplash.com/random/400x500/?tshirt" alt="Classic White T-Shirt">
          </a>
          <div class="product-info">
            <div class="product-title">Classic White T-Shirt</div>
            <div class="product-price">$29.99</div>
            <div class="product-rating">★★★★☆</div>
            <div class="product-actions">
              <button class="add-to-cart">Add to Cart</button>
              <button class="wishlist"><i class="fas fa-heart"></i></button>
            </div>
          </div>
        </div>
        
        <!-- Product 2 -->
        <div class="product-card">
          <a href="product.html?id=2" class="product-img">
            <img src="https://source.unsplash.com/random/400x500/?jeans" alt="Slim Fit Jeans">
          </a>
          <div class="product-info">
            <div class="product-title">Slim Fit Jeans</div>
            <div class="product-price">$49.99</div>
            <div class="product-rating">★★★★★</div>
            <div class="product-actions">
              <button class="add-to-cart">Add to Cart</button>
              <button class="wishlist"><i class="fas fa-heart"></i></button>
            </div>
          </div>
        </div>
        
        <!-- Product 3 -->
        <div class="product-card">
          <a href="product.html?id=3" class="product-img">
            <img src="https://source.unsplash.com/random/400x500/?dress" alt="Summer Dress">
          </a>
          <div class="product-info">
            <div class="product-title">Summer Dress</div>
            <div class="product-price">$59.99</div>
            <div class="product-rating">★★★★☆</div>
            <div class="product-actions">
              <button class="add-to-cart">Add to Cart</button>
              <button class="wishlist"><i class="fas fa-heart"></i></button>
            </div>
          </div>
        </div>
        
        <!-- Product 4 -->
        <div class="product-card">
          <a href="product.html?id=4" class="product-img">
            <img src="https://source.unsplash.com/random/400x500/?jacket" alt="Casual Jacket">
          </a>
          <div class="product-info">
            <div class="product-title">Casual Jacket</div>
            <div class="product-price">$79.99</div>
            <div class="product-rating">★★★★★</div>
            <div class="product-actions">
              <button class="add-to-cart">Add to Cart</button>
              <button class="wishlist"><i class="fas fa-heart"></i></button>
            </div>
          </div>
        </div>
        
        <!-- Product 5 -->
        <div class="product-card">
          <a href="product.html?id=5" class="product-img">
            <img src="https://source.unsplash.com/random/400x500/?hoodie" alt="Oversized Hoodie">
          </a>
          <div class="product-info">
            <div class="product-title">Oversized Hoodie</div>
            <div class="product-price">$45.99</div>
            <div class="product-rating">★★★★☆</div>
            <div class="product-actions">
              <button class="add-to-cart">Add to Cart</button>
              <button class="wishlist"><i class="fas fa-heart"></i></button>
            </div>
          </div>
        </div>
        
        <!-- Product 6 -->
        <div class="product-card">
          <a href="product.html?id=6" class="product-img">
            <img src="https://source.unsplash.com/random/400x500/?polo" alt="Classic Polo Shirt">
          </a>
          <div class="product-info">
            <div class="product-title">Classic Polo Shirt</div>
            <div class="product-price">$34.99</div>
            <div class="product-rating">★★★★★</div>
            <div class="product-actions">
              <button class="add-to-cart">Add to Cart</button>
              <button class="wishlist"><i class="fas fa-heart"></i></button>
            </div>
          </div>
        </div>
        
        <!-- Product 7 -->
        <div class="product-card">
          <a href="product.html?id=7" class="product-img">
            <img src="https://source.unsplash.com/random/400x500/?shorts" alt="Denim Shorts">
          </a>
          <div class="product-info">
            <div class="product-title">Denim Shorts</div>
            <div class="product-price">$39.99</div>
            <div class="product-rating">★★★★☆</div>
            <div class="product-actions">
              <button class="add-to-cart">Add to Cart</button>
              <button class="wishlist"><i class="fas fa-heart"></i></button>
            </div>
          </div>
        </div>
        
        <!-- Product 8 -->
        <div class="product-card">
          <a href="product.html?id=8" class="product-img">
            <img src="https://source.unsplash.com/random/400x500/?sweater" alt="Knit Sweater">
          </a>
          <div class="product-info">
            <div class="product-title">Knit Sweater</div>
            <div class="product-price">$54.99</div>
            <div class="product-rating">★★★★★</div>
            <div class="product-actions">
              <button class="add-to-cart">Add to Cart</button>
              <button class="wishlist"><i class="fas fa-heart"></i></button>
            </div>
          </div>
        </div>
      </div>
      
      <div class="pagination">
        <a href="#" class="active">1</a>
        <a href="#">2</a>
        <a href="#">3</a>
        <a href="#">4</a>
        <a href="#" class="next">Next <i class="fas fa-chevron-right"></i></a>
      </div>
    </div>
  </section>
  
  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="footer-columns">
        <div class="footer-column">
          <h3>Shop</h3>
          <ul class="footer-links">
            <li><a href="products.html?category=denim">Denim Collection</a></li>
            <li><a href="products.html?category=oversized">Oversized Essentials</a></li>
            <li><a href="products.html?category=polo">Classic Polo</a></li>
            <li><a href="products.html?category=basics">Everyday Basics</a></li>
          </ul>
        </div>
        
        <div class="footer-column">
          <h3>Customer Service</h3>
          <ul class="footer-links">
            <li><a href="contact.html">Contact Us</a></li>
            <li><a href="faq.html">FAQs</a></li>
            <li><a href="shipping.html">Shipping & Returns</a></li>
            <li><a href="size-guide.html">Size Guide</a></li>
            <li><a href="track-order.html">Track Order</a></li>
          </ul>
        </div>
        
        <div class="footer-column">
          <h3>About Us</h3>
          <ul class="footer-links">
            <li><a href="about.html">Our Story</a></li>
            <li><a href="careers.html">Careers</a></li>
            <li><a href="press.html">Press</a></li>
            <li><a href="sustainability.html">Sustainability</a></li>
            <li><a href="blog.html">Blog</a></li>
          </ul>
        </div>
        
        <div class="footer-column">
          <h3>Legal</h3>
          <ul class="footer-links">
            <li><a href="terms.html">Terms & Conditions</a></li>
            <li><a href="privacy.html">Privacy Policy</a></li>
            <li><a href="cookies.html">Cookie Policy</a></li>
            <li><a href="terms-of-use.html">Terms of Use</a></li>
          </ul>
        </div>
      </div>
      
      <div class="copyright">
        © 2025 Vestu. All rights reserved.
      </div>
    </div>
  </footer>
  <script>
  document.addEventListener('DOMContentLoaded', function() {
    setupEventListeners();
    fetchAndRenderProducts();  
  });

  function setupEventListeners() {
    const categoryFilter = document.getElementById('category-filter');
    const sortFilter = document.getElementById('sort-filter');
    const searchButton = document.getElementById('search-button');
    const searchInput = document.getElementById('search-input');

    categoryFilter.addEventListener('change', fetchAndRenderProducts);

    sortFilter.addEventListener('change', fetchAndRenderProducts);

    searchButton.addEventListener('click', fetchAndRenderProducts);

    searchInput.addEventListener('keydown', function(e) {
      if (e.key === 'Enter') fetchAndRenderProducts();
    });
  }

  async function fetchAndRenderProducts() {
    const category = document.getElementById('category-filter').value;
    const sortValue = document.getElementById('sort-filter').value;
    const searchQuery = document.getElementById('search-input').value.trim();

    let url = '/api/products?';

    if (category !== 'all') {
      url += `category=${encodeURIComponent(category)}&`;
    }

    switch (sortValue) {
      case 'price-low':
        url += 'sort=price-low-to-high&';
        break;
      case 'price-high':
        url += 'sort=price-high-to-low&';
        break;
      case 'newest':
        url += 'sort=newest&';
        break;
      default:
        break;
    }

    if (searchQuery) {
      url += `search=${encodeURIComponent(searchQuery)}&`;
    }

    try {
      const response = await fetch(url);

      if (!response.ok) {
        throw new Error(`HTTP error! Status: ${response.status}`);
      }

      const products = await response.json();
      updateProductGrid(products);
    } catch (error) {
      console.error('Error fetching products:', error);
      showErrorMessage('Failed to load products. Please try again.');
    }
  }

  function updateProductGrid(products) {
    const productsGrid = document.querySelector('.products-grid');
    productsGrid.innerHTML = '';

    if (!products || products.length === 0) {
      productsGrid.innerHTML = '<div class="no-products">No products found</div>';
      return;
    }

    products.forEach(product => {
      const productCard = document.createElement('div');
      productCard.classList.add('product-card');

      const productId = product._id || '';
      const productName = product.name || 'Unnamed Product';
      const productPrice = typeof product.price === 'number' ? product.price : 0;
      const productRating = typeof product.rating === 'number' ? product.rating : 0;
      const imageUrl = product.imageUrl || 'https://source.unsplash.com/random/400x500/?clothing';
      const stars = generateStarRating(productRating);

      productCard.innerHTML = `
        <a href="product.html?id=${productId}" class="product-img">
          <img src="${imageUrl}" alt="${productName}" onerror="this.onerror=null; this.src='https://source.unsplash.com/random/400x500/?clothing';">
        </a>
        <div class="product-info">
          <div class="product-title">${productName}</div>
          <div class="product-price">$${productPrice.toFixed(2)}</div>
          <div class="product-rating">${stars}</div>
          <div class="product-actions">
            <button class="add-to-cart" data-id="${productId}">Add to Cart</button>
            <button class="wishlist" data-id="${productId}"><i class="fas fa-heart"></i></button>
          </div>
        </div>
      `;

      productsGrid.appendChild(productCard);
    });

    setupAddToCartButtons();
  }

  function generateStarRating(rating) {
    const fullStars = Math.floor(rating);
    const hasHalfStar = rating % 1 >= 0.5;
    const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);

    let starsHTML = '';
    for (let i = 0; i < fullStars; i++) starsHTML += '★';
    if (hasHalfStar) starsHTML += '★';
    for (let i = 0; i < emptyStars; i++) starsHTML += '☆';

    return starsHTML;
  }

function setupAddToCartButtons() {
  const buttons = document.querySelectorAll('.add-to-cart');
  buttons.forEach(button => {
    button.addEventListener('click', async () => {
      const productId = button.getAttribute('data-id');

      const token = localStorage.getItem('token'); 
      if (!token) {
        alert('You must be logged in to add products to the cart.');
        return;
      }

      try {
        const response = await fetch('/api/cart/add', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${token}` 
          },
          body: JSON.stringify({ productId, quantity: 1 })
        });

        if (!response.ok) throw new Error(`Failed to add to cart. Status: ${response.status}`);

        const result = await response.json();
        alert(`Product added to cart: ${result.message || 'success'}`);
      } catch (error) {
        console.error('Add to Cart Error:', error);
        alert('Error adding product to cart.');
      }
    });
  });
}

  function showErrorMessage(message) {
    const productsGrid = document.querySelector('.products-grid');
    if (!productsGrid) return;
    const errorElement = document.createElement('div');
    errorElement.className = 'error-message';
    errorElement.style.textAlign = 'center';
    errorElement.style.padding = '20px';
    errorElement.style.color = 'var(--danger)';
    errorElement.textContent = message;
    productsGrid.innerHTML = '';
    productsGrid.appendChild(errorElement);
  }
</script>
</body>
</html>